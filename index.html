<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JarvisHeyrose - Global Ä°Ã§erik Ãœretici Merkezi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --brand-red: #ff0000;
            --brand-dark: #0a0a0a;
            --brand-gray: #1f1f1f;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--brand-dark);
            color: #ffffff;
            scroll-behavior: smooth;
        }

        .gradient-text {
            background: linear-gradient(135deg, #fff 0%, #888 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-glass {
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .hero-gradient {
            background: radial-gradient(circle at 50% 50%, rgba(255, 0, 0, 0.1) 0%, transparent 50%);
        }

        .card-premium {
            background: var(--brand-gray);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-premium:hover {
            border-color: rgba(255, 0, 0, 0.5);
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        section { display: none; }
        section.active { display: block; animation: slideIn 0.6s ease-out; }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .lang-btn.active {
            background: #ffffff;
            color: #000000;
            border-color: #ffffff;
        }

        .btn-primary {
            background: #ffffff;
            color: #000000;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: scale(1.02);
            background: #f0f0f0;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 1000;
            justify-content: center; align-items: center;
        }

        .modal-content {
            background: #111;
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 90%; max-width: 500px;
            border-radius: 24px;
            padding: 2.5rem;
        }

        .faq-item {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            margin-bottom: 12px;
        }

        .faq-item summary {
            padding: 20px;
            cursor: pointer;
            font-weight: 600;
            list-style: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-content { padding: 0 20px 20px; color: #aaa; font-size: 0.95rem; }

        .footer-link {
            color: #666;
            transition: color 0.3s ease;
            cursor: pointer;
        }

        .footer-link:hover { color: #fff; }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--brand-dark); }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #444; }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="fixed w-full z-50 nav-glass">
        <div class="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
            <div class="text-2xl font-bold tracking-tighter cursor-pointer" onclick="window.showSection('home')">
                JARVIS<span class="text-red-600">HEYROSE</span>
            </div>
            
            <nav class="hidden md:flex space-x-10 items-center text-[13px] font-bold uppercase tracking-widest">
                <a href="javascript:void(0)" onclick="window.showSection('home')" class="footer-link">Anasayfa</a>
                <a href="javascript:void(0)" onclick="window.showSection('apps')" class="footer-link">Uygulamalar</a>
                <a href="javascript:void(0)" onclick="window.showSection('tools')" class="footer-link">AraÃ§lar</a>
                <div id="authArea">
                    <button id="loginBtn" onclick="window.handleGoogleLogin()" class="bg-white text-black px-6 py-2.5 rounded-full hover:bg-gray-200 transition">GiriÅŸ Yap</button>
                    <div id="userProfile" class="hidden flex items-center space-x-4">
                        <img id="userAvatar" src="" class="w-9 h-9 rounded-full border border-white/10">
                        <span id="userName" class="text-white hidden lg:block">YÃ¼kleniyor...</span>
                        <button onclick="window.handleLogout()" class="text-red-500 hover:text-red-400"><i class="fas fa-power-off"></i></button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main class="pt-20 flex-grow">
        <!-- Home Section -->
        <section id="home" class="active hero-gradient">
            <div class="max-w-7xl mx-auto px-6 py-24">
                <div class="flex flex-wrap gap-3 mb-12 justify-center lg:justify-start">
                    <button class="lang-btn active px-5 py-2 rounded-full text-xs font-bold" onclick="window.setLanguage('tr', this)">TR</button>
                    <button class="lang-btn px-5 py-2 rounded-full text-xs font-bold" onclick="window.setLanguage('en', this)">EN</button>
                    <button class="lang-btn px-5 py-2 rounded-full text-xs font-bold" onclick="window.setLanguage('de', this)">DE</button>
                    <button class="lang-btn px-5 py-2 rounded-full text-xs font-bold" onclick="window.setLanguage('fr', this)">FR</button>
                    <button class="lang-btn px-5 py-2 rounded-full text-xs font-bold" onclick="window.setLanguage('es', this)">ES</button>
                    <button class="lang-btn px-5 py-2 rounded-full text-xs font-bold" onclick="window.setLanguage('pt', this)">PT</button>
                </div>

                <div class="grid lg:grid-cols-2 gap-20 items-center">
                    <div class="text-center lg:text-left">
                        <h1 class="text-6xl lg:text-8xl font-extrabold mb-8 leading-[1.1] tracking-tighter" id="h-title">
                            Viral Ä°Ã§erikler <br><span class="text-red-600">OluÅŸturun</span>
                        </h1>
                        <p class="text-xl text-gray-400 mb-12 max-w-xl mx-auto lg:mx-0 leading-relaxed" id="h-desc">
                            Yapay zeka ile sosyal medya algoritmasÄ±nÄ± yÃ¶netin. Saniyeler iÃ§inde etkileÅŸim odaklÄ± baÅŸlÄ±k ve hashtagler Ã¼retin.
                        </p>
                        <div class="flex flex-col sm:flex-row gap-5 justify-center lg:justify-start">
                            <button onclick="window.showSection('tools')" class="btn-primary px-10 py-5 rounded-2xl text-lg font-bold shadow-2xl">Ãœretime BaÅŸla</button>
                            <button onclick="window.showSection('about')" class="bg-white/5 border border-white/10 px-10 py-5 rounded-2xl text-lg font-bold hover:bg-white/10 transition">KeÅŸfet</button>
                        </div>
                    </div>
                    <div class="relative">
                        <div class="absolute -inset-10 bg-red-600/10 blur-[120px] rounded-full"></div>
                        <img src="hero (3).png" class="relative w-full rounded-[40px] border border-white/10 shadow-2xl" alt="JarvisHero">
                    </div>
                </div>
            </div>
        </section>

        <!-- Tools Section -->
        <section id="tools">
            <div class="max-w-7xl mx-auto px-6 py-24">
                <div class="mb-16">
                    <h2 class="text-4xl font-bold mb-4 tracking-tight">Ãœretici AraÃ§larÄ±</h2>
                    <p class="text-gray-500">Platforma Ã¶zel optimize edilmiÅŸ yapay zeka araÃ§larÄ±.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="card-premium p-10 rounded-[32px]" onclick="window.openToolModal('YouTube BaÅŸlÄ±k', 'title')">
                        <div class="w-12 h-12 bg-red-600/10 flex items-center justify-center rounded-2xl mb-8 text-red-600 text-2xl"><i class="fab fa-youtube"></i></div>
                        <h3 class="text-2xl font-bold mb-3">YouTube BaÅŸlÄ±k</h3>
                        <p class="text-gray-500 text-sm leading-relaxed">Algoritma dostu, tÄ±klanma oranÄ± yÃ¼ksek viral baÅŸlÄ±klar.</p>
                    </div>
                    <div class="card-premium p-10 rounded-[32px]" onclick="window.openToolModal('Instagram Reels', 'title')">
                        <div class="w-12 h-12 bg-pink-600/10 flex items-center justify-center rounded-2xl mb-8 text-pink-600 text-2xl"><i class="fab fa-instagram"></i></div>
                        <h3 class="text-2xl font-bold mb-3">Instagram BaÅŸlÄ±k</h3>
                        <p class="text-gray-500 text-sm leading-relaxed">EriÅŸim odaklÄ± modern Reels ve post aÃ§Ä±klamalarÄ±.</p>
                    </div>
                    <div class="card-premium p-10 rounded-[32px]" onclick="window.openToolModal('TikTok Trend', 'title')">
                        <div class="w-12 h-12 bg-white/10 flex items-center justify-center rounded-2xl mb-8 text-white text-2xl"><i class="fab fa-tiktok"></i></div>
                        <h3 class="text-2xl font-bold mb-3">TikTok BaÅŸlÄ±k</h3>
                        <p class="text-gray-500 text-sm leading-relaxed">KeÅŸfet odaklÄ±, kÄ±sa ve akÄ±lda kalÄ±cÄ± trend metinleri.</p>
                    </div>
                    <div class="card-premium p-10 rounded-[32px]" onclick="window.openToolModal('X (Twitter) Post', 'title')">
                        <div class="w-12 h-12 bg-blue-400/10 flex items-center justify-center rounded-2xl mb-8 text-blue-400 text-2xl"><i class="fab fa-twitter"></i></div>
                        <h3 class="text-2xl font-bold mb-3">X BaÅŸlÄ±k</h3>
                        <p class="text-gray-500 text-sm leading-relaxed">Trend topic etkileÅŸimi iÃ§in optimize edilmiÅŸ metinler.</p>
                    </div>
                    <div class="card-premium p-10 rounded-[32px] lg:col-span-2 flex flex-col justify-center relative overflow-hidden" onclick="window.openToolModal('Kanal Analizi', 'channel')">
                        <div class="relative z-10">
                            <h3 class="text-3xl font-bold mb-4">Kanal Veri Analiz Merkezi</h3>
                            <p class="text-gray-500 max-w-md">Kanal performansÄ±nÄ±zÄ± profesyonel veri setleri ile kontrol edin ve geliÅŸtirin.</p>
                        </div>
                        <div class="absolute right-[-20px] bottom-[-20px] opacity-10 text-[180px]"><i class="fas fa-chart-line"></i></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="sss">
            <div class="max-w-3xl mx-auto px-6 py-24">
                <div class="text-center mb-16">
                    <h2 class="text-5xl font-bold mb-6 tracking-tight">SÄ±k Sorulan Sorular</h2>
                    <p class="text-gray-500">JarvisHeyrose hakkÄ±nda merak edilenler.</p>
                </div>
                <div class="space-y-4">
                    <details class="faq-item" open>
                        <summary>Hizmet Ã¼cretsiz mi? <i class="fas fa-plus text-xs"></i></summary>
                        <div class="faq-content">Her kullanÄ±cÄ± gÃ¼nlÃ¼k 2 adet Ã¼cretsiz Ã¼retim hakkÄ±na sahiptir. Reklam izleyerek +1 bonus hak kazanabilir veya Pro paketleri bekleyebilirsiniz.</div>
                    </details>
                    <details class="faq-item">
                        <summary>Hangi dilleri destekliyor? <i class="fas fa-plus text-xs"></i></summary>
                        <div class="faq-content">Åu an TR, EN, DE, FR, ES ve PT dillerinde profesyonel iÃ§erik Ã¼retebilirsiniz.</div>
                    </details>
                    <details class="faq-item">
                        <summary>GÃ¼venli mi? <i class="fas fa-plus text-xs"></i></summary>
                        <div class="faq-content">Google OAuth ve Supabase gÃ¼vencesiyle sadece limit takibi yapÄ±yoruz. Verileriniz bizimle gÃ¼vende.</div>
                    </details>
                </div>
            </div>
        </section>

        <!-- HakkÄ±mÄ±zda Section -->
        <section id="about">
            <div class="max-w-4xl mx-auto px-6 py-24 text-center">
                <h2 class="text-6xl font-extrabold mb-12 tracking-tight">GeleceÄŸi <span class="text-red-600">Ã–ngÃ¶rÃ¼n</span></h2>
                <div class="bg-white/5 p-12 rounded-[40px] border border-white/5 text-gray-400 text-lg leading-relaxed text-left">
                    <p class="mb-8 font-bold text-white text-2xl leading-snug">Jarvis Heyrose, iÃ§erik Ã¼reticilerinin bÃ¼yÃ¼me sÃ¼reÃ§lerini otomatize etmek iÃ§in doÄŸdu.</p>
                    <p class="mb-6">Biz sadece metin Ã¼retmiyoruz; her platformun (YouTube, Instagram, TikTok, X) en gÃ¼ncel algoritmik verilerini analiz ederek, saniyeler iÃ§inde viral olma potansiyeli taÅŸÄ±yan "anahtar" iÃ§erikler sunuyoruz.</p>
                    <p>DÃ¼nya genelinde 17 binden fazla Ã¼retici, algoritmaya takÄ±lmadan kitlelerine ulaÅŸmak iÃ§in bizi tercih ediyor. Sizin iÃ§in sadece bir asistan deÄŸil, bir strateji ortaÄŸÄ±yÄ±z.</p>
                </div>
            </div>
        </section>

        <!-- Static Pages (Simplified) -->
        <section id="security" class="max-w-4xl mx-auto px-6 py-24 text-center"><h2 class="text-4xl font-bold mb-8">GÃ¼venlik</h2><p class="text-gray-500">TÃ¼m verileriniz 256-bit SSL ve Supabase altyapÄ±sÄ± ile korunmaktadÄ±r.</p></section>
        <section id="contact" class="max-w-4xl mx-auto px-6 py-24 text-center"><h2 class="text-4xl font-bold mb-8">Ä°letiÅŸim</h2><p class="text-gray-500">Destek ve sorularÄ±nÄ±z iÃ§in: jarvisheyrose@gmail.com</p></section>
        <section id="career" class="max-w-4xl mx-auto px-6 py-24 text-center"><h2 class="text-4xl font-bold mb-8">Kariyer</h2><p class="text-gray-500">Ekibimize katÄ±lmak iÃ§in baÅŸvurular yakÄ±nda aÃ§Ä±lacaktÄ±r.</p></section>
        <section id="privacy" class="max-w-4xl mx-auto px-6 py-24 text-center"><h2 class="text-4xl font-bold mb-8">Gizlilik</h2><p class="text-gray-500">KullanÄ±cÄ± verileri sadece limit takibi amacÄ±yla anonim olarak iÅŸlenmektedir.</p></section>
        <section id="terms" class="max-w-4xl mx-auto px-6 py-24 text-center"><h2 class="text-4xl font-bold mb-8">KullanÄ±m ÅartlarÄ±</h2><p class="text-gray-500">JarvisHeyrose hizmetlerini kullanarak platform kurallarÄ±nÄ± kabul etmiÅŸ sayÄ±lÄ±rsÄ±nÄ±z.</p></section>
        <section id="apps" class="max-w-4xl mx-auto px-6 py-24 text-center"><h2 class="text-4xl font-bold mb-8">Uygulamalar</h2><p class="text-gray-500">iOS ve Android uygulamalarÄ±mÄ±z yakÄ±nda yayÄ±nda.</p></section>
        <section id="platform" class="max-w-4xl mx-auto px-6 py-24 text-center"><h2 class="text-4xl font-bold mb-8">Platform AltyapÄ±sÄ±</h2><p class="text-gray-500">Google Gemini Pro 2.0 destekli hibrit analiz motoru.</p></section>
    </main>

    <!-- Footer -->
    <footer class="py-20 border-t border-white/5">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex flex-wrap justify-center gap-x-10 gap-y-5 text-[11px] font-bold uppercase tracking-[2px] mb-12">
                <a onclick="window.showSection('about')" class="footer-link">HakkÄ±mÄ±zda</a>
                <a onclick="window.showSection('sss')" class="footer-link">SSS</a>
                <a onclick="window.showSection('career')" class="footer-link">Kariyer</a>
                <a onclick="window.showSection('contact')" class="footer-link">Ä°letiÅŸim</a>
                <a onclick="window.showSection('security')" class="footer-link">GÃ¼venlik</a>
                <a onclick="window.showSection('privacy')" class="footer-link">Gizlilik</a>
                <a onclick="window.showSection('terms')" class="footer-link">Åartlar</a>
            </div>
            <div class="text-center text-gray-700 text-[10px] tracking-widest">
                &copy; 2026 JARVISHEYROSE GLOBAL INC. TÃœM HAKLARI SAKLIDIR.
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <div id="toolModal" class="modal-overlay" onclick="window.closeModal(event)">
        <div class="modal-content">
            <div class="flex justify-between items-start mb-10">
                <div>
                    <span id="limitBadge" class="bg-red-600/10 text-red-500 text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-widest">Hak: 2</span>
                    <h3 id="modalTitle" class="text-3xl font-bold mt-4">Analiz</h3>
                </div>
                <button onclick="window.closeModalForce()" class="text-gray-500 hover:text-white transition"><i class="fas fa-times text-xl"></i></button>
            </div>
            
            <div id="inputArea">
                <input type="text" id="userInput" class="custom-input bg-transparent text-white border-white/10" placeholder="Ä°Ã§erik konusu girin...">
                <button onclick="window.startGeneration()" id="generateBtn" class="w-full btn-primary py-4 rounded-2xl font-bold text-lg">OluÅŸtur</button>
            </div>

            <div id="loadingContainer" class="hidden text-center py-10">
                <div class="loading-spinner"></div>
                <p class="text-gray-500 animate-pulse text-sm">Yapay zeka analiz ediyor...</p>
            </div>

            <div id="resultArea" class="hidden">
                <div id="resultContent" class="result-box border-red-600/20 bg-red-600/5 text-white"></div>
                <div class="mt-8 flex gap-3">
                    <button onclick="window.copyResult()" class="flex-1 bg-white/5 border border-white/10 py-3 rounded-xl font-bold hover:bg-white/10 transition">Kopyala</button>
                    <button onclick="window.resetModal()" class="flex-1 border border-white/5 py-3 rounded-xl font-bold text-gray-500">Yenile</button>
                </div>
            </div>
        </div>
    </div>

    <div id="bonusModal" class="modal-overlay">
        <div class="modal-content text-center">
            <div class="text-6xl mb-6">ğŸ“º</div>
            <h3 class="text-3xl font-bold mb-4">GÃ¼nlÃ¼k Limit Doldu</h3>
            <p class="text-gray-500 mb-10 leading-relaxed">BugÃ¼nkÃ¼ Ã¼cretsiz haklarÄ±nÄ±zÄ± kullandÄ±nÄ±z. Reklam izleyerek +1 bonus hak kazanmak ister misiniz?</p>
            <button onclick="window.claimBonus()" class="w-full btn-primary py-4 rounded-2xl font-bold text-lg">Bonus Al (Reklam)</button>
            <button onclick="document.getElementById('bonusModal').style.display='none'" class="mt-6 text-gray-600 font-bold">Daha Sonra</button>
        </div>
    </div>

    <script>
        const SUPABASE_URL = "https://cdzxzgwvebmvccfkvfll.supabase.co";
        const SUPABASE_ANON_KEY = "sb_publishable_QDz16Zn2HeoOw7Sf25PENA_FgZL0P-F";
        let supabaseClient;
        if(typeof supabase !== 'undefined') supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        let currentUser = null;
        let currentLang = 'tr';
        let currentToolType = 'title';

        const i18n = {
            tr: { h_title: "Viral Ä°Ã§erikler <br><span class='text-red-600'>OluÅŸturun</span>", h_desc: "Yapay zeka motoru ile sosyal medya algoritmasÄ±nÄ± yÃ¶netin. Saniyeler iÃ§inde etkileÅŸim rekorlarÄ± kÄ±ran baÅŸlÄ±k ve hashtagler Ã¼retin." },
            en: { h_title: "Create <br><span class='text-red-600'>Viral Content</span>", h_desc: "Master the social media algorithm with AI. Generate high-engagement titles and hashtags in seconds." },
            de: { h_title: "Virale <br><span class='text-red-600'>Inhalte erstellen</span>", h_desc: "Beherrschen Sie den Social-Media-Algorithmus mit KI. Erstellen Sie in Sekundenschnelle Titel und Hashtags." },
            fr: { h_title: "CrÃ©er du <br><span class='text-red-600'>Contenu Viral</span>", h_desc: "MaÃ®trisez l'algorithme des rÃ©seaux sociaux avec l'IA. GÃ©nÃ©rez des titres et des hashtags en quelques secondes." },
            es: { h_title: "Crea <br><span class='text-red-600'>Contenido Viral</span>", h_desc: "Domina el algoritmo de las redes sociales con IA. Genera tÃ­tulos y hashtags de alto engagement en segundos." },
            pt: { h_title: "Crie <br><span class='text-red-600'>ConteÃºdo Viral</span>", h_desc: "Domine o algoritmo das redes sociais com IA. Gere tÃ­tulos e hashtags de alto engajamento em segundos." }
        };

        window.handleGoogleLogin = async () => { if(supabaseClient) await supabaseClient.auth.signInWithOAuth({ provider: 'google' }); };
        window.handleLogout = async () => { if(supabaseClient) { await supabaseClient.auth.signOut(); window.location.reload(); } };
        
        if (supabaseClient) {
            supabaseClient.auth.getSession().then(({ data: { session } }) => updateAuthUI(session));
            supabaseClient.auth.onAuthStateChange((_, session) => updateAuthUI(session));
        }

        function updateAuthUI(session) {
            currentUser = session?.user || null;
            document.getElementById('loginBtn').style.display = session ? 'none' : 'block';
            document.getElementById('userProfile').style.display = session ? 'flex' : 'none';
            if (session) {
                document.getElementById('userName').innerText = session.user.user_metadata.full_name.split(' ')[0];
                document.getElementById('userAvatar').src = session.user.user_metadata.avatar_url;
                updateCreditsUI();
            }
        }

        function getCredits() {
            const today = new Date().toDateString();
            const stored = localStorage.getItem('jh_credits');
            const data = stored ? JSON.parse(stored) : null;
            if (!data || data.date !== today) return { count: 2, date: today, bonusUsed: false };
            return data;
        }

        function updateCreditsUI() {
            const credits = getCredits();
            document.getElementById('limitBadge').innerText = "HAK: " + credits.count;
            document.getElementById('generateBtn').disabled = (credits.count <= 0);
        }

        window.setLanguage = (lang, btn) => {
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            const content = i18n[lang] || i18n.tr;
            document.getElementById('h-title').innerHTML = content.h_title;
            document.getElementById('h-desc').innerText = content.h_desc;
        };

        window.showSection = (id) => {
            document.querySelectorAll('main > section').forEach(s => s.classList.remove('active'));
            const target = document.getElementById(id);
            if(target) target.classList.add('active');
            window.scrollTo(0,0);
        };

        window.openToolModal = (title, type) => {
            if(!currentUser) { window.handleGoogleLogin(); return; }
            currentToolType = type;
            document.getElementById('modalTitle').innerText = title;
            document.getElementById('toolModal').style.display = 'flex';
            window.resetModal();
            updateCreditsUI();
        };

        window.startGeneration = async () => {
            const credits = getCredits();
            if(credits.count <= 0) {
                if(!credits.bonusUsed) document.getElementById('bonusModal').style.display = 'flex';
                else alert("GÃ¼nlÃ¼k limitiniz doldu.");
                return;
            }
            const val = document.getElementById('userInput').value;
            if(!val) return;

            document.getElementById('inputArea').style.display = 'none';
            document.getElementById('loadingContainer').style.display = 'block';

            try {
                const { data: { session } } = await supabaseClient.auth.getSession();
                const res = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${session.access_token}` },
                    body: JSON.stringify({ topic: val, type: currentToolType, lang: currentLang })
                });
                const data = await res.json();
                if(!res.ok) throw new Error(data.error || "Hata");

                localStorage.setItem('jh_credits', JSON.stringify({ ...credits, count: credits.count - 1 }));
                document.getElementById('resultContent').innerText = data.result;
                document.getElementById('loadingContainer').style.display = 'none';
                document.getElementById('resultArea').style.display = 'block';
                updateCreditsUI();
            } catch(e) { 
                console.error(e);
                window.resetModal();
                alert("Ãœretim hatasÄ± oluÅŸtu.");
            }
        };

        window.claimBonus = () => {
            const credits = getCredits();
            localStorage.setItem('jh_credits', JSON.stringify({ ...credits, count: 1, bonusUsed: true }));
            document.getElementById('bonusModal').style.display = 'none';
            updateCreditsUI();
            alert("Bonus hakkÄ±nÄ±z tanÄ±mlandÄ±.");
        };

        window.copyResult = () => {
            const text = document.getElementById('resultContent').innerText;
            const temp = document.createElement('textarea');
            temp.value = text;
            document.body.appendChild(temp);
            temp.select();
            document.execCommand('copy');
            document.body.removeChild(temp);
            alert("KopyalandÄ±!");
        };

        window.resetModal = () => {
            document.getElementById('inputArea').style.display = 'block';
            document.getElementById('loadingContainer').style.display = 'none';
            document.getElementById('resultArea').style.display = 'none';
        };

        window.closeModalForce = () => document.getElementById('toolModal').style.display = 'none';
        window.closeModal = (e) => { if(e.target.id === 'toolModal') window.closeModalForce(); };
    </script>
</body>
</html>
