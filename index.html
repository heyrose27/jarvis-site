
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jarvis Heyrose</title>

  <style>
    :root{
      --bg:#0b0f14; --panel2:#0c121b; --border:rgba(255,255,255,.08);
      --text:#e6edf6; --muted:#a9b4c3; --accent:#7c3aed; --accent2:#22c55e;
      --shadow:0 10px 30px rgba(0,0,0,.55); --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background: radial-gradient(1200px 700px at 30% 10%, rgba(124,58,237,.18), transparent 55%),
                  radial-gradient(900px 600px at 80% 70%, rgba(34,197,94,.10), transparent 55%),
                  var(--bg);
      color:var(--text); height:100vh; overflow:hidden;
    }
    .app{display:flex;height:100vh;width:100vw;}
    .sidebar{
      width:260px; padding:18px 14px;
      background: linear-gradient(180deg, rgba(255,255,255,.03), transparent 35%), var(--panel2);
      border-right:1px solid var(--border);
      display:flex; flex-direction:column; gap:14px;
    }
    .brand{display:flex;align-items:center;gap:10px;padding:10px 10px 14px;}
    .logo{width:38px;height:38px;border-radius:12px;background:radial-gradient(circle at 30% 30%, rgba(124,58,237,.9), rgba(34,197,94,.6));}
    .brand h1{font-size:14px;margin:0;letter-spacing:.6px}
    .brand p{margin:2px 0 0;font-size:12px;color:var(--muted)}
    .nav{display:flex;flex-direction:column;gap:6px;padding:0 6px;overflow:auto;}
    .nav button{
      all:unset; cursor:pointer; display:flex; align-items:center; justify-content:space-between;
      padding:10px 12px; border-radius:12px; color:var(--text);
      border:1px solid transparent;
    }
    .nav button:hover{background:rgba(255,255,255,.04);border-color:rgba(255,255,255,.06);}
    .nav button.active{background:rgba(124,58,237,.12);border-color:rgba(124,58,237,.35);}
    .pill{font-size:11px;padding:3px 8px;border-radius:999px;background:rgba(34,197,94,.12);border:1px solid rgba(34,197,94,.25);}
    .sidebarFooter{margin-top:auto;padding:10px 6px 6px;color:var(--muted);font-size:12px;display:flex;gap:8px;flex-wrap:wrap;align-items:center;}
    .miniBtn{all:unset;cursor:pointer;padding:8px 10px;border-radius:12px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);color:var(--text);font-size:12px;}
    .main{flex:1;display:flex;flex-direction:column;min-width:0;}
    .topbar{
      height:64px;display:flex;align-items:center;justify-content:space-between;
      padding:0 18px;border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.03), transparent 70%);
    }
    .badge{display:flex;align-items:center;gap:8px;padding:8px 10px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.03);font-size:13px;}
    .dot{width:8px;height:8px;border-radius:50%;background:var(--accent2);box-shadow:0 0 14px rgba(34,197,94,.55)}
    .content{flex:1;overflow:auto;padding:18px;padding-bottom:130px;}
    .pageTitle{display:flex;align-items:flex-end;justify-content:space-between;gap:16px;margin:4px 0 14px;}
    .pageTitle h2{margin:0;font-size:20px}
    .pageTitle p{margin:0;color:var(--muted);font-size:13px}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px;}
    .card{grid-column:span 4;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);box-shadow:var(--shadow);min-height:150px;display:flex;flex-direction:column;}
    .cardHeader{padding:12px 12px 8px;display:flex;justify-content:space-between;align-items:center;gap:10px;}
    .tag{font-size:11px;padding:4px 8px;border-radius:999px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);color:var(--muted);}
    .cardBody{padding:0 12px 12px;color:var(--muted);font-size:13px;line-height:1.35;flex:1;}
    .cardFooter{padding:12px;border-top:1px solid rgba(255,255,255,.07);display:flex;justify-content:space-between;align-items:center;gap:10px;}
    .primary{all:unset;cursor:pointer;padding:9px 12px;border-radius:12px;background:rgba(34,197,94,.14);border:1px solid rgba(34,197,94,.28);font-weight:800;font-size:13px;}
    .ghost{all:unset;cursor:pointer;padding:9px 12px;border-radius:12px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.10);font-size:13px;}
    .promptBar{
      position:fixed;left:260px;right:0;bottom:0;padding:14px 18px;border-top:1px solid var(--border);
      background:linear-gradient(180deg, rgba(11,15,20,.30), rgba(11,15,20,.90) 25%, rgba(11,15,20,.96));
      backdrop-filter: blur(10px);
    }
    .promptInner{max-width:1100px;margin:0 auto;display:flex;gap:10px;align-items:center;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.10);border-radius:18px;padding:10px;}
    .promptInner textarea{width:100%;resize:none;height:44px;max-height:140px;background:transparent;border:none;outline:none;color:var(--text);font-size:14px;padding:10px;}
    .sendBtn{all:unset;cursor:pointer;padding:10px 14px;border-radius:14px;background:rgba(124,58,237,.22);border:1px solid rgba(124,58,237,.38);font-weight:900;font-size:13px;white-space:nowrap;}
    .modeSelect{all:unset;cursor:pointer;padding:10px 12px;border-radius:14px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.10);font-size:13px;white-space:nowrap;}
    @media (max-width:980px){.sidebar{width:220px}.promptBar{left:220px}.card{grid-column:span 6}}
    @media (max-width:720px){.sidebar{width:78px;padding:14px 10px}.brand h1,.brand p{display:none}.nav button span.label{display:none}.pill{display:none}.promptBar{left:78px;padding:12px}.card{grid-column:span 12}.topbar{padding:0 12px}.badge{display:none}}
  </style>
</head>

<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo"></div>
        <div>
          <h1>JARVIS HEYROSE</h1>
          <p>Odalar • AI</p>
        </div>
      </div>

      <nav class="nav" id="nav">
        <button class="active" data-page="youtube"><span class="label">YouTube Odası</span><span class="pill">AI</span></button>
        <button data-page="analiz"><span class="label">Kanal Analiz</span></button>
      </nav>

      <div class="sidebarFooter">
        <button class="miniBtn" id="helpBtn">Yardım</button>
      </div>
    </aside>

    <main class="main">
      <header class="topbar">
        <div class="badge"><span class="dot"></span> Sistem Aktif</div>
        <div style="color:var(--muted);font-size:13px">Gemini bağlı</div>
      </header>

      <section class="content">
        <div id="page-youtube" class="page">
          <div class="pageTitle">
            <div>
              <h2>YouTube Odası</h2>
              <p>Yaz → Oluştur (Gemini)</p>
            </div>
          </div>

          <div class="grid">
            <div class="card">
              <div class="cardHeader"><strong>Başlık Üret</strong><span class="tag">AI</span></div>
              <div class="cardBody">Kısa ve SEO odaklı başlık üretir.</div>
              <div class="cardFooter">
                <button class="primary" onclick="setMode('baslik')">Seç</button>
                <button class="ghost" onclick="alert('Demo')">Tanıtım</button>
              </div>
            </div>
            <div class="card">
              <div class="cardHeader"><strong>Hashtag Üret</strong><span class="tag">AI</span></div>
              <div class="cardBody">İçeriğe göre hashtag seti üretir.</div>
              <div class="cardFooter">
                <button class="primary" onclick="setMode('hashtag')">Seç</button>
                <button class="ghost" onclick="alert('Demo')">Tanıtım</button>
              </div>
            </div>
            <div class="card">
              <div class="cardHeader"><strong>Kanal Açıklaması</strong><span class="tag">AI</span></div>
              <div class="cardBody">Kanal açıklaması üretir.</div>
              <div class="cardFooter">
                <button class="primary" onclick="setMode('aciklama')">Seç</button>
                <button class="ghost" onclick="alert('Demo')">Tanıtım</button>
              </div>
            </div>
          </div>
        </div>

        <div id="page-analiz" class="page" style="display:none">
          <div class="pageTitle">
            <div>
              <h2>Kanal Analiz</h2>
              <p>Yaz → Oluştur</p>
            </div>
          </div>
        </div>
      </section>

      <div class="promptBar">
        <div class="promptInner">
          <button class="modeSelect" id="modeBtn">Mod: Başlık</button>
          <textarea id="promptInput" placeholder="Buraya yaz..."></textarea>
          <button class="sendBtn" id="sendBtn">Oluştur</button>
        </div>
      </div>
    </main>
  </div>

  <script>
    const nav = document.getElementById('nav');
    const pages = {
      youtube: document.getElementById('page-youtube'),
      analiz: document.getElementById('page-analiz'),
    };
    function goPage(key){
      Object.values(pages).forEach(p => p.style.display='none');
      pages[key].style.display='block';
      [...nav.querySelectorAll('button[data-page]')].forEach(b => b.classList.toggle('active', b.dataset.page===key));
    }
    nav.addEventListener('click', (e)=>{
      const btn = e.target.closest('button[data-page]');
      if(!btn) return;
      goPage(btn.dataset.page);
    });

    let mode = 'baslik';
    const modeBtn = document.getElementById('modeBtn');
    function setMode(m){
      mode = m;
      const map = { baslik:'Başlık', hashtag:'Hashtag', aciklama:'Açıklama', analiz:'Analiz' };
      modeBtn.textContent = 'Mod: ' + (map[m] || 'Başlık');
    }
    window.setMode = setMode;

    modeBtn.addEventListener('click', ()=>{
      const order = ['baslik','hashtag','aciklama'];
      const idx = (order.indexOf(mode)+1) % order.length;
      setMode(order[idx]);
    });

    document.getElementById('helpBtn').addEventListener('click', ()=>alert('Kutudan yaz → Oluştur'));

    // Gemini çağrısı (bu endpoint Vercel function: /api/gemini)
    document.getElementById('sendBtn').addEventListener('click', async ()=>{
      const txt = document.getElementById('promptInput').value.trim();
      if(!txt) return alert('Bir şey yaz.');

      const payload = { prompt: `Mod: ${mode}\nİstek: ${txt}` };

      try{
        const r = await fetch('/api/gemini', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify(payload)
        });

        const raw = await r.text();
        let data;
        try { data = JSON.parse(raw); } catch { data = { error: raw }; }

        if(!r.ok) return alert(data.error || 'Hata');
        alert(data.reply || 'Cevap yok');
      }catch(e){
        alert('Bağlantı hatası: ' + e);
      }
    });
  </script>
</body>
</html>
