<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jarvis Heyrose - AI Tools</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body{
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: radial-gradient(circle at top left, #1a1a2e, #0b0b12);
      color:#fff;
      min-height:100vh;
    }
    .app{ display:flex; min-height:100vh; }

    /* SIDEBAR */
    .sidebar{
      width:260px;
      background: rgba(255,255,255,0.04);
      border-right: 1px solid rgba(255,255,255,0.08);
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:16px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      padding:10px 10px;
      border-radius:14px;
      background: rgba(255,255,255,0.03);
    }
    .brandLogo{
      width:42px; height:42px; border-radius:14px;
      background: linear-gradient(135deg,#7c3aed,#22c55e);
      display:flex; align-items:center; justify-content:center;
      font-weight:800; color:#0b0b12;
    }
    .brandText h1{ font-size:14px; font-weight:800; letter-spacing:0.4px; }
    .brandText p{ font-size:12px; opacity:0.75; margin-top:2px; }

    .menuTitle{ font-size:12px; opacity:0.65; margin-top:6px; padding-left:8px; }
    .menu{ display:flex; flex-direction:column; gap:8px; }
    .menu button{
      text-align:left; width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.03);
      color:#fff;
      cursor:pointer;
      transition:0.2s;
      font-weight:700;
    }
    .menu button:hover{ transform: translateY(-1px); background: rgba(255,255,255,0.06); }
    .menu button.active{
      background: rgba(124,58,237,0.25);
      border-color: rgba(124,58,237,0.45);
    }

    .sidebarFooter{
      margin-top:auto;
      font-size:12px;
      opacity:0.6;
      padding:10px;
      border-radius:14px;
      background: rgba(255,255,255,0.03);
      border:1px solid rgba(255,255,255,0.08);
    }

    /* MAIN */
    .main{
      flex:1;
      padding:24px;
      display:flex;
      flex-direction:column;
      gap:18px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }

    .statusPill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 14px;
      border-radius:999px;
      background: rgba(34,197,94,0.12);
      border:1px solid rgba(34,197,94,0.25);
      font-weight:700;
      font-size:13px;
    }
    .dot{
      width:10px; height:10px; border-radius:50%;
      background:#22c55e;
      box-shadow:0 0 12px rgba(34,197,94,0.8);
    }

    .rightActions{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .timerBox{
      padding:10px 14px;
      border-radius:999px;
      background: rgba(255,255,255,0.05);
      border:1px solid rgba(255,255,255,0.1);
      font-weight:800;
      font-size:13px;
      display:flex;
      gap:8px;
      align-items:center;
      white-space:nowrap;
    }

    .authArea{ position:relative; display:flex; gap:10px; align-items:center; }

    .loginBtn{
      border:none;
      cursor:pointer;
      font-weight:900;
      padding:10px 14px;
      border-radius:14px;
      background: rgba(255,255,255,0.06);
      border:1px solid rgba(255,255,255,0.12);
      color:#fff;
      display:inline-flex;
      align-items:center;
      gap:10px;
      user-select:none;
      white-space:nowrap;
    }
    .loginBtn:hover{ background: rgba(255,255,255,0.10); }

    .googleIcon{
      width:18px; height:18px; border-radius:6px;
      background:
        conic-gradient(from 180deg, #ea4335 0 25%, #fbbc05 0 50%, #34a853 0 75%, #4285f4 0 100%);
      box-shadow: 0 0 0 1px rgba(255,255,255,0.12) inset;
    }

    .menuBtn{
      border:none;
      cursor:pointer;
      font-weight:900;
      padding:10px 12px;
      border-radius:14px;
      background: rgba(124,58,237,0.22);
      border:1px solid rgba(124,58,237,0.35);
      color:#fff;
      user-select:none;
      white-space:nowrap;
    }
    .menuBtn:hover{ background: rgba(124,58,237,0.30); }

    .dropdown{
      position:absolute;
      top:46px;
      right:0;
      width:220px;
      background: rgba(15,15,25,0.96);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius:16px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.55);
      padding:10px;
      display:none;
      z-index:20;
      backdrop-filter: blur(10px);
    }
    .dropdown .email{
      font-size:12px;
      opacity:0.85;
      padding:10px 10px 8px;
      border-bottom:1px solid rgba(255,255,255,0.10);
      margin-bottom:8px;
      word-break:break-all;
    }
    .dropdown button{
      width:100%;
      text-align:left;
      padding:10px 12px;
      border-radius:12px;
      background: rgba(255,255,255,0.06);
      border:1px solid rgba(255,255,255,0.10);
      color:#fff;
      cursor:pointer;
      font-weight:900;
    }
    .dropdown button:hover{ background: rgba(255,255,255,0.10); }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:14px;
    }
    .card{
      background: rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.08);
      border-radius:20px;
      padding:16px;
      min-height:120px;
      display:flex;
      flex-direction:column;
      gap:10px;
      transition:0.2s;
      cursor:pointer;
    }
    .card:hover{ transform: translateY(-2px); background: rgba(255,255,255,0.06); }
    .cardTop{ display:flex; justify-content:space-between; align-items:center; gap:10px; }
    .cardTitle{ font-weight:900; font-size:16px; }
    .badge{
      font-size:12px;
      font-weight:800;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(255,255,255,0.06);
      border:1px solid rgba(255,255,255,0.10);
      opacity:0.9;
      white-space:nowrap;
    }
    .cardDesc{ font-size:13px; opacity:0.75; line-height:1.35; }
    .cardBtn{
      margin-top:auto;
      align-self:flex-end;
      padding:10px 14px;
      border-radius:12px;
      border:none;
      cursor:pointer;
      font-weight:900;
      background: linear-gradient(135deg,#22c55e,#7c3aed);
      color:#0b0b12;
      transition:0.2s;
    }
    .cardBtn:hover{ transform: scale(1.03); }

    .panel{
      margin-top:6px;
      background: rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.08);
      border-radius:20px;
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .panel h2{ font-size:18px; font-weight:900; }

    .warn{
      padding:12px 14px;
      border-radius:14px;
      background: rgba(245,158,11,0.12);
      border:1px solid rgba(245,158,11,0.25);
      color:#fff;
      font-size:13px;
      line-height:1.35;
      font-weight:700;
    }

    .inputRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:flex-start;
    }
    textarea{
      flex:1;
      min-width:260px;
      min-height:90px;
      resize:vertical;
      padding:14px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.25);
      color:#fff;
      outline:none;
      font-size:14px;
      line-height:1.35;
    }
    .actionBtn{
      padding:14px 18px;
      border-radius:14px;
      border:none;
      cursor:pointer;
      font-weight:900;
      background: linear-gradient(135deg,#7c3aed,#22c55e);
      color:#0b0b12;
      transition:0.2s;
      min-width:180px;
      white-space:nowrap;
    }
    .actionBtn:hover{ transform: translateY(-1px); }

    .locked{ opacity:0.45; pointer-events:none; filter: grayscale(0.6); }

    .results{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:12px;
      margin-top:8px;
    }
    .resultBox{
      background: rgba(0,0,0,0.25);
      border:1px solid rgba(255,255,255,0.10);
      border-radius:16px;
      padding:12px;
      min-height:140px;
    }
    .resultBox h3{
      font-size:13px;
      font-weight:900;
      opacity:0.9;
      margin-bottom:8px;
    }
    .resultItem{
      font-size:13px;
      opacity:0.85;
      margin-bottom:6px;
      line-height:1.35;
    }
    .copySmall{
      margin-top:10px;
      width:100%;
      padding:10px;
      border-radius:12px;
      border:none;
      cursor:pointer;
      font-weight:900;
      background: rgba(255,255,255,0.08);
      color:#fff;
      transition:0.2s;
    }
    .copySmall:hover{ background: rgba(255,255,255,0.12); }

    .footerLinks{
      margin-top:6px;
      text-align:center;
      font-size:13px;
      opacity:0.8;
    }
    .footerLinks a{
      color:#22c55e;
      text-decoration:none;
      font-weight:800;
      margin:0 10px;
    }

    @media (max-width: 980px){
      .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .results{ grid-template-columns: 1fr; }
      .sidebar{ width:220px; }
    }
    @media (max-width: 720px){
      .app{ flex-direction:column; }
      .sidebar{ width:100%; }
      .grid{ grid-template-columns: 1fr; }
      .rightActions{ justify-content:flex-start; }
      .dropdown{ right:auto; left:0; }
    }
  </style>
</head>

<body>
  <div class="app">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="brand">
        <div class="brandLogo">JH</div>
        <div class="brandText">
          <h1>JARVIS HEYROSE</h1>
          <p>AI ‚Ä¢ Ders ‚Ä¢ Video</p>
        </div>
      </div>

      <div class="menuTitle">Odalar</div>
      <div class="menu" id="menu"></div>

      <div class="sidebarFooter">
        Bug√ºnl√ºk kullanƒ±m: <b>√úcretsiz</b><br/>
        Limitler: 3 ba≈ülƒ±k / 3 hashtag / 3 a√ßƒ±klama
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">

      <div class="topbar">
        <div class="statusPill"><span class="dot"></span> Sistem Aktif</div>

        <div class="rightActions">
          <div class="timerBox">‚è≥ S√ºre: <span id="timeLeftText">30:00</span></div>

          <!-- AUTH -->
          <div class="authArea">
            <button class="loginBtn" id="googleBtn" type="button">
              <span class="googleIcon"></span>
              Google ile Giri≈ü
            </button>

            <button class="menuBtn" id="userMenuBtn" type="button" style="display:none;">Men√º</button>

            <div class="dropdown" id="userDropdown">
              <div class="email" id="userEmail">-</div>
              <button id="logoutBtn" type="button">√áƒ±kƒ±≈ü Yap</button>
            </div>
          </div>
        </div>
      </div>

      <!-- ROOMS GRID -->
      <section class="grid" id="roomsGrid"></section>

      <!-- PANEL -->
      <section class="panel" id="panel">
        <h2 id="panelTitle">Bir oda se√ß</h2>

        <div id="warnBox" class="warn" style="display:none;">
          ‚ö†Ô∏è Bu i√ßerikler yapay zek√¢ tarafƒ±ndan √ºretilir. Doƒüruluƒüu %100 garanti deƒüildir.
        </div>

        <div class="inputRow">
          <textarea id="userInput" placeholder="Ne istiyorsun? √ñrnek: 'Saksafon m√ºziƒüi Shorts i√ßin viral ba≈ülƒ±k ve hashtag'"></textarea>
          <button class="actionBtn" id="generateBtn" type="button">üöÄ √úret</button>
        </div>

        <div class="results" id="results" style="display:none;">
          <div class="resultBox">
            <h3>üî• 3 Ba≈ülƒ±k</h3>
            <div id="titles"></div>
            <button class="copySmall" type="button" onclick="copyBox('titles')">Kopyala</button>
          </div>

          <div class="resultBox">
            <h3>üè∑Ô∏è 3 Hashtag</h3>
            <div id="hashtags"></div>
            <button class="copySmall" type="button" onclick="copyBox('hashtags')">Kopyala</button>
          </div>

          <div class="resultBox">
            <h3>üìù 3 A√ßƒ±klama</h3>
            <div id="descs"></div>
            <button class="copySmall" type="button" onclick="copyBox('descs')">Kopyala</button>
          </div>
        </div>

        <div class="footerLinks">
          <a href="privacy.html" target="_blank">Gizlilik Politikasƒ±</a>
          |
          <a href="terms.html" target="_blank">Hizmet ≈ûartlarƒ±</a>
        </div>
      </section>

    </main>
  </div>

  <!-- Supabase JS (v2) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script>
    // =========================
    // SUPABASE AYARLARI (SENƒ∞N PROJE)
    // =========================
    const SUPABASE_URL = "https://cdzxzgwvebmvccfkvfll.supabase.co";
    const SUPABASE_ANON_KEY = "sb_publishable_QDz16Zn2HeoOw7Sf25PENA_FgZL0P-F";
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const googleBtn = document.getElementById("googleBtn");
    const userMenuBtn = document.getElementById("userMenuBtn");
    const userDropdown = document.getElementById("userDropdown");
    const userEmailEl = document.getElementById("userEmail");
    const logoutBtn = document.getElementById("logoutBtn");

    function setLoggedOutUI(){
      googleBtn.style.display = "inline-flex";
      googleBtn.innerHTML = `<span class="googleIcon"></span> Google ile Giri≈ü`;
      userMenuBtn.style.display = "none";
      userDropdown.style.display = "none";
      userEmailEl.textContent = "-";
    }

    function setLoggedInUI(email){
      googleBtn.style.display = "none";
      userMenuBtn.style.display = "inline-flex";
      userEmailEl.textContent = email || "-";
      userDropdown.style.display = "none";
    }

    // Google ile giri≈ü
    googleBtn.addEventListener("click", async () => {
      const redirectTo = window.location.origin; // https://www.jarvisheyrose.com
      const { error } = await supabase.auth.signInWithOAuth({
        provider: "google",
        options: { redirectTo }
      });
      if (error) alert("Giri≈ü hatasƒ±: " + error.message);
    });

    // Men√º a√ß/kapat
    userMenuBtn.addEventListener("click", () => {
      userDropdown.style.display = (userDropdown.style.display === "block") ? "none" : "block";
    });

    // Dƒ±≈üarƒ± tƒ±klayƒ±nca kapat
    document.addEventListener("click", (e) => {
      const authArea = document.querySelector(".authArea");
      if (!authArea.contains(e.target)) userDropdown.style.display = "none";
    });

    // √áƒ±kƒ±≈ü yap
    logoutBtn.addEventListener("click", async () => {
      userDropdown.style.display = "none";
      const { error } = await supabase.auth.signOut();
      if (error) alert("√áƒ±kƒ±≈ü hatasƒ±: " + error.message);
      // sayfayƒ± yenile
      window.location.href = window.location.origin;
    });

    // Sayfa a√ßƒ±lƒ±nca session kontrol
    (async () => {
      const { data } = await supabase.auth.getSession();
      const email = data?.session?.user?.email;
      if (email) setLoggedInUI(email);
      else setLoggedOutUI();
    })();

    // Auth deƒüi≈üince UI g√ºncelle
    supabase.auth.onAuthStateChange((_event, session) => {
      const email = session?.user?.email;
      if (email) setLoggedInUI(email);
      else setLoggedOutUI();
    });

    // =========================
    // 30 DAKƒ∞KA LIMIT
    // =========================
    const TOTAL_SECONDS = 30 * 60;
    let secondsLeft = TOTAL_SECONDS;
    let isLocked = false;

    function formatTime(s){
      const m = String(Math.floor(s/60)).padStart(2,'0');
      const ss = String(s%60).padStart(2,'0');
      return `${m}:${ss}`;
    }

    function tick(){
      if(isLocked) return;
      secondsLeft--;
      document.getElementById("timeLeftText").textContent = formatTime(secondsLeft);

      if(secondsLeft <= 0){
        lockAll("‚õî Bug√ºn size ayrƒ±lan s√ºrenin sonuna geldik. Yarƒ±n tekrar g√∂r√º≈ü√ºr√ºz.");
      }
    }

    function lockAll(message){
      isLocked = true;
      document.getElementById("generateBtn").textContent = "Kilitli";
      document.getElementById("generateBtn").classList.add("locked");
      alert(message);
    }

    setInterval(tick, 1000);
    document.getElementById("timeLeftText").textContent = formatTime(secondsLeft);

    // =========================
    // ODALAR
    // =========================
    const rooms = [
      { id:"youtube", name:"YouTube Odasƒ±", desc:"YouTube i√ßin ba≈ülƒ±k / hashtag / a√ßƒ±klama", badge:"Free" },
      { id:"insta", name:"Instagram Reels Odasƒ±", desc:"Reels i√ßin y√ºksek aramalƒ± i√ßerikler", badge:"Free" },
      { id:"tiktok", name:"TikTok Odasƒ±", desc:"TikTok viral ba≈ülƒ±k / hashtag / a√ßƒ±klama", badge:"Free" },
      { id:"facebook", name:"Facebook Odasƒ±", desc:"Facebook post ve sayfa b√ºy√ºtme", badge:"Free" },
      { id:"x", name:"X (Twitter) Odasƒ±", desc:"X i√ßin etkile≈üim artƒ±ran i√ßerik", badge:"Free" },
      { id:"ders", name:"Ders 30dk (ƒ∞lk/Orta/Lise)", desc:"30 dakikalƒ±k ders + soru", badge:"30dk" },
      { id:"uni", name:"√úniversite Adaylarƒ±", desc:"Sƒ±nav merkezi gibi √ßalƒ±≈üma", badge:"30dk" },
      { id:"kpss", name:"KPSS Test Odasƒ±", desc:"KPSS test √ß√∂zme + √ßalƒ±≈üma", badge:"30dk" },
      { id:"analiz", name:"Kanal Analiz Odasƒ±", desc:"Kanal b√ºy√ºtme analizi", badge:"Free" }
    ];

    let currentRoom = null;

    const roomsGrid = document.getElementById("roomsGrid");
    const menu = document.getElementById("menu");

    function renderRooms(){
      roomsGrid.innerHTML = "";
      rooms.forEach(r => {
        const div = document.createElement("div");
        div.className = "card";
        div.onclick = () => selectRoom(r.id);

        div.innerHTML = `
          <div class="cardTop">
            <div class="cardTitle">${r.name}</div>
            <div class="badge">${r.badge}</div>
          </div>
          <div class="cardDesc">${r.desc}</div>
          <button class="cardBtn" type="button">Se√ß</button>
        `;
        roomsGrid.appendChild(div);
      });
    }

    function renderMenu(){
      menu.innerHTML = "";
      rooms.forEach(r => {
        const btn = document.createElement("button");
        btn.textContent = r.name;
        btn.onclick = () => selectRoom(r.id);
        btn.id = "menu_" + r.id;
        menu.appendChild(btn);
      });
    }

    function selectRoom(roomId){
      currentRoom = rooms.find(x => x.id === roomId);

      // men√º aktif
      rooms.forEach(r => {
        const b = document.getElementById("menu_" + r.id);
        if(!b) return;
        b.classList.toggle("active", r.id === roomId);
      });

      document.getElementById("panelTitle").textContent = currentRoom.name + " ‚Ä¢ ƒ∞√ßerik √úret";
      document.getElementById("results").style.display = "none";

      // Ders odalarƒ±nda uyarƒ±
      const warnBox = document.getElementById("warnBox");
      if(["ders","uni","kpss"].includes(roomId)){
        warnBox.style.display = "block";
      } else {
        warnBox.style.display = "none";
      }
    }

    renderRooms();
    renderMenu();

    // =========================
    // √úRETƒ∞M (3-3-3 LIMIT)
    // =========================
    function pickPlatformLabel(roomId){
      const map = {
        youtube: "YouTube",
        insta: "Instagram Reels",
        tiktok: "TikTok",
        facebook: "Facebook",
        x: "X (Twitter)",
        ders: "Ders (30dk)",
        uni: "√úniversite Adaylarƒ±",
        kpss: "KPSS",
        analiz: "Kanal Analiz"
      };
      return map[roomId] || "Platform";
    }

    function make3Titles(topic, platform){
      return [
        `${topic} | ${platform} i√ßin en iyi ba≈ülƒ±k`,
        `${platform} i√ßin ${topic} (y√ºksek arama)`,
        `${topic} ‚Äî Bug√ºn dene (viral)`
      ];
    }

    function make3Hashtags(topic, platform){
      const clean = topic.replace(/\s+/g,'').replace(/[^a-zA-Z0-9ƒü√º≈ü√∂√ßƒ±ƒ∞ƒû√ú≈û√ñ√á]/g,'').slice(0,18);
      const p = platform.replace(/\s+/g,'').replace(/[^a-zA-Z0-9]/g,'').slice(0,14);
      return [
        `#${p || "Ke≈üfet"}`,
        `#${clean || "Trend"}`,
        `#Ke≈üfet`
      ];
    }

    function make3Descs(topic, platform){
      return [
        `${platform} i√ßin hazƒ±rlandƒ±: ${topic}\nBeƒüendiysen kaydet + payla≈ü.`,
        `${topic} hakkƒ±nda en net i√ßerik burada.\nTakip etmeyi unutma.`,
        `Bug√ºn dene: ${topic}\nYorumlara fikrini yaz.`
      ];
    }

    function renderList(elId, arr){
      const el = document.getElementById(elId);
      el.innerHTML = "";
      arr.forEach((t,i)=>{
        const div = document.createElement("div");
        div.className = "resultItem";
        div.textContent = (i+1) + ") " + t;
        el.appendChild(div);
      });
    }

    document.getElementById("generateBtn").addEventListener("click", () => {
      if(isLocked) return;

      if(!currentRoom){
        alert("√ñnce bir oda se√ß.");
        return;
      }

      const input = document.getElementById("userInput").value.trim();
      if(!input){
        alert("Bir ≈üey yaz.");
        return;
      }

      const platform = pickPlatformLabel(currentRoom.id);

      const titles = make3Titles(input, platform);
      const hashtags = make3Hashtags(input, platform);
      const descs = make3Descs(input, platform);

      renderList("titles", titles);
      renderList("hashtags", hashtags);
      renderList("descs", descs);

      document.getElementById("results").style.display = "grid";
    });

    // =========================
    // KOPYALA
    // =========================
    function copyBox(id){
      const el = document.getElementById(id);
      const text = el.innerText;
      navigator.clipboard.writeText(text).then(()=>{
        alert("Kopyalandƒ±");
      }).catch(()=>{
        alert("Kopyalama engellendi. Manuel kopyala.");
      });
    }
  </script>
</body>
</html>
